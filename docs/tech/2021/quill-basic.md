# æ·±å…¥æµ…å‡ºQuillï¼šQuillåŸºæœ¬ä½¿ç”¨å’Œé…ç½®

## å¼•è¨€

[Quill](https://quilljs.com/) æ˜¯ä¸€æ¬¾ API é©±åŠ¨ã€æ”¯æŒæ ¼å¼å’Œæ¨¡å—å®šåˆ¶çš„å¼€æº Web å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œç›®å‰åœ¨ GitHub çš„ Star æ•°æ˜¯ 38kã€‚

æ·±å…¥æµ…å‡º Quill ç³»åˆ—æ‰“ç®—æŒ‰ç…§`ä½¿ç”¨` -> `åŸç†` -> `å®è·µ`çš„æ€è·¯å»è®² Quill å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä¸»è¦åˆ†æˆä»¥ä¸‹7ç¯‡ã€‚

- æ·±å…¥æµ…å‡º Quill ç³»åˆ—ä¹‹ä½¿ç”¨ç¯‡1ï¼šQuill åŸºæœ¬ä½¿ç”¨å’Œé…ç½®
- æ·±å…¥æµ…å‡º Quill ç³»åˆ—ä¹‹ä½¿ç”¨ç¯‡2ï¼šé€šè¿‡ Quill API å®ç°å¯¹ç¼–è¾‘å™¨å†…å®¹çš„å®Œå…¨æ§åˆ¶
- æ·±å…¥æµ…å‡º Quill ç³»åˆ—ä¹‹åŸç†ç¯‡1ï¼šç°ä»£å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ Quill çš„æ¨¡å—åŒ–æœºåˆ¶
- æ·±å…¥æµ…å‡º Quill ç³»åˆ—ä¹‹åŸç†ç¯‡2ï¼šç°ä»£å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ Quill çš„å†…å®¹æ¸²æŸ“æœºåˆ¶
- æ·±å…¥æµ…å‡º Quill ç³»åˆ—ä¹‹å®è·µç¯‡1ï¼šå¦‚ä½•å°†é¾™æ’å…¥åˆ°ç¼–è¾‘å™¨ä¸­ï¼Ÿ
- æ·±å…¥æµ…å‡º Quill ç³»åˆ—ä¹‹å®è·µç¯‡2ï¼šæ•´ä¸ªè´ªåƒè›‡æ¸¸æˆåˆ°ç¼–è¾‘å™¨é‡Œç©å„¿å§
- æ·±å…¥æµ…å‡º Quill ç³»åˆ—ä¹‹é€‰å‹ç¯‡ï¼šQuill å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„å®è·µ

æœ¬æ–‡æ˜¯ç¬¬1ç¯‡ï¼Œæˆ‘ä»¬å…ˆä» Quill çš„åŸºæœ¬ä½¿ç”¨å¼€å§‹å§ï¼

## 1 æç®€æ–¹å¼ä½¿ç”¨ Quill

å¿«é€Ÿå¼€å§‹ä¸‰éƒ¨æ›²ï¼š
- å®‰è£…
- å¼•å…¥
- ä½¿ç”¨

```shell
// å®‰è£…
npm i quill
```

```html
<div id="editor"></div>
```

```ts
// å¼•å…¥
import Quill from 'quill';

// ä½¿ç”¨
const quill = new Quill('#editor');
```

è™½ç„¶æˆ‘ä»¬å·²ç»åˆå§‹åŒ–äº† Quill å®ä¾‹ï¼Œä½†æ˜¯åœ¨é¡µé¢ä¸­å´ä»€ä¹ˆä¹Ÿçœ‹ä¸åˆ°ã€‚

![BaseEditor.png](/assets/quill-basic-1.png)

è™½ç„¶çœ‹ä¸Šå»ä»€ä¹ˆä¹Ÿæ²¡æœ‰ï¼Œä½†æ˜¯æˆ‘ä»¬ç‚¹å‡»ç©ºç™½å¤„ï¼Œä¼šå‘ç°æœ‰ä¸€ä¸ªå…‰æ ‡ï¼Œå¹¶ä¸”å¯ä»¥è¾“å…¥å†…å®¹ï¼Œå¹¶ç»™å†…å®¹å¢åŠ æ ¼å¼ï¼ˆç”±äºæ²¡æœ‰å·¥å…·æ ï¼Œåªèƒ½é€šè¿‡ Quill å¿«æ·é”®`Ctrl+B`å¢åŠ æ ¼å¼ï¼‰ï¼Œä»¥ä¸‹æ˜¯åŠ¨ç”»æ•ˆæœï¼š

![Quill å¿«é€Ÿå¼€å§‹.gif](/assets/quill-basic-2.gif)

è™½ç„¶åªæ˜¯ä¸€ä¸ªæç®€ç‰ˆçš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä¸è¿‡åŠ ä¸Šè¾¹æ¡†å’ŒæŒ‰é’®ï¼Œå°±æ˜¯ä¸€ä¸ªåŸºç¡€ç‰ˆçš„æ˜é‡‘è¯„è®ºæ¡†ï¼ˆè¿˜å·®æ’å…¥è¡¨æƒ…å’Œå›¾ç‰‡ï¼‰ğŸ˜œ

![åŸºæœ¬æ ·å¼.png](/assets/quill-basic-3.png)

è¿™æ˜¯ä½¿ç”¨ Quill æœ€ç®€å•çš„æ–¹å¼ã€‚

## 2 åŠ ä¸€äº›é…ç½®é€‰é¡¹å§

### 2.1 é…ç½®ç¼–è¾‘å™¨å®¹å™¨å…ƒç´  container

Quill ç±»ä¸€å…±æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¿…é€‰çš„ç¼–è¾‘å™¨å®¹å™¨å…ƒç´ `container`ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªCSSé€‰æ‹©å™¨ï¼Œæ¯”å¦‚å‰é¢çš„`#editor`ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªDOMå…ƒç´ ï¼Œæ¯”å¦‚ï¼š

```ts
const container = document.getElementById('editor');
// const container = document.querySelector('#editor');
// const container = $('#editor').get(0);
const quill = new Quill(container);
```

å¦‚æœå®¹å™¨é‡Œé¢å·²ç»æœ‰ä¸€äº› HTML å…ƒç´ ï¼Œé‚£ä¹ˆåˆå§‹åŒ– Quill çš„æ—¶å€™ï¼Œé‚£äº›å…ƒç´ ä¹Ÿä¼šæ¸²æŸ“å‡ºæ¥ï¼Œæ¯”å¦‚ï¼š

```html
<div id="editor">
  <p>Quill: An API Driven Rich Text Editor</p>
  <h2>BUILT FOR DEVELOPERS</h2>
  <p>Granular access to the editor's content, changes and events through a simple API. Works consistently and deterministically with JSON as both input and output.</p>
  <h2>CROSS PLATFORM</h2>
  <p>Supports all modern browsers on desktops, tablets and phones. Experience the same consistent behavior and produced HTML across platforms.</p>
  <h2>FITS LIKE A GLOVE</h2>
  <p>Used in small projects and giant Fortune 500s alike. Start simple with the Quill core then easily customize or add your own extensions later if your product needs grow.</p>
</div>
```

æ¸²æŸ“å‡ºæ¥çš„ç¼–è¾‘å™¨æ•ˆæœï¼š

![æ¸²æŸ“åˆå§‹HTML.png](/assets/quill-basic-4.png)

### 2.2 é…ç½®é€‰é¡¹ options

ç¬¬äºŒä¸ªå‚æ•°æ˜¯å¯é€‰çš„é…ç½®é€‰é¡¹`options`ï¼Œoptionsæ˜¯ä¸€ä¸ªJSONå¯¹è±¡ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³ç»™æˆ‘ä»¬çš„ç¼–è¾‘å™¨å¢åŠ ä¸€ä¸ªä¸»é¢˜ï¼Œä½¿å®ƒä¸å†é‚£ä¹ˆå•è°ƒã€‚

```ts
const quill = new Quill('#editor', {
  theme: 'snow'
});
```

å¦å¤–éœ€è¦å¼•å…¥è¯¥ä¸»é¢˜å¯¹åº”çš„æ ·å¼ï¼š

```css
@import 'quill/dist/quill.snow.css';
```

è¿™æ—¶æˆ‘ä»¬çœ‹åˆ°ç¼–è¾‘å™¨å·²ç»æœ‰ä¸€ä¸ªå·¥å…·æ ã€‚


![å·¥å…·æ .png](/assets/quill-basic-5.png)

å¹¶ä¸”å¯ä»¥é€šè¿‡å·¥å…·æ å¯¹ç¼–è¾‘å™¨çš„å†…å®¹è¿›è¡Œæ“ä½œï¼Œæ¯”å¦‚ç»™`Quill`å¢åŠ ä¸€ä¸ªè¶…é“¾æ¥ï¼š


![è¶…é“¾æ¥.gif](/assets/quill-basic-6.gif)

é™¤äº†`snow`ä¸»é¢˜ï¼ŒQuill è¿˜å†…ç½®äº†ä¸€ä¸ª`bubble`æ°”æ³¡ä¸»é¢˜ï¼Œé…ç½®æ–¹å¼å’Œ`snow`ä¸»é¢˜ä¸€æ ·ï¼š
- å¼•å…¥ä¸»é¢˜æ ·å¼
- åœ¨optionsé‡Œé…ç½®ä¸»é¢˜

```css
// å¼•å…¥bubbleä¸»é¢˜æ ·å¼
@import 'quill/dist/quill.bubble.css';
```

```ts
const quill = new Quill('#editor', {
  theme: 'bubble' // é…ç½® bubble ä¸»é¢˜
});
```

æ•ˆæœå¦‚ä¸‹ï¼š

![bubbleä¸»é¢˜.png](/assets/quill-basic-7.png)

bubbleä¸»é¢˜æ²¡æœ‰æ˜¾æ€§çš„å·¥å…·æ ï¼Œå®ƒä¼šåœ¨ä½ é€‰ä¸­ç¼–è¾‘å™¨ä¸­çš„æ–‡æœ¬æ—¶ï¼Œåœ¨é€‰ä¸­æ–‡æœ¬çš„ä¸‹æ–¹æ˜¾ç¤ºä¸€ä¸ªæ°”æ³¡å·¥å…·æ ï¼Œä»è€Œå¯¹æ–‡æœ¬è¿›è¡Œæ ¼å¼åŒ–æ“ä½œï¼Œæ¯”å¦‚ç»™é€‰ä¸­çš„æ®µè½å¢åŠ å¼•ç”¨æ ¼å¼ï¼š

![bubble.gif](/assets/quill-basic-8.gif)

## 3 æ›´å¤šé…ç½®é€‰é¡¹

Quill ä¸ä»…ä»…å¯ä»¥é…ç½®ä¸»é¢˜ï¼Œoptionsä¸€å…±æ”¯æŒ8ä¸ªé…ç½®é€‰é¡¹ï¼š
- bounds ç¼–è¾‘å™¨å†…æµ®æ¡†çš„è¾¹ç•Œ
- debug debugçº§åˆ«
- formats æ ¼å¼ç™½åå•
- modules æ¨¡å—
- placeholder å ä½æ–‡æœ¬
- readOnly åªè¯»æ¨¡å¼
- scrollingContainer æ»šåŠ¨å®¹å™¨
- theme ä¸»é¢˜

### 3.1 formats æ ¼å¼ç™½åå•

è¿™ä¸ªé…ç½®é¡¹éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚åˆšåˆšæåˆ°çš„æ˜é‡‘è¯„è®ºæ¡†ï¼Œæˆ‘ä»¬å‘ç°è¯„è®ºæ¡†é‡Œåªèƒ½æ’å…¥çº¯æ–‡æœ¬ï¼Œå…¶ä»–æ ¼å¼éƒ½ä¸å…è®¸ï¼Œå³ä½¿æ—¶ç²˜è´´è¿›æ¥çš„æ ¼å¼åŒ–æ–‡æœ¬ä¹Ÿä¼šå˜æˆçº¯æ–‡æœ¬ã€‚

åœ¨ Quill é‡Œå¾ˆå®¹æ˜“å®ç°ï¼Œåªéœ€è¦é…ç½®`formats`ä¸ºç©ºæ•°ç»„å³å¯ã€‚

```ts
const quill = new Quill('#editor', {
  theme: 'snow',
  formats: []
});
```

æ³¨æ„è¿™é‡Œçš„`formats`æ ¼å¼ç™½åå•ï¼Œæ§åˆ¶çš„æ˜¯å†…å®¹å®é™…çš„æ ¼å¼ï¼Œå’Œè®¾ç½®æ ¼å¼çš„æ¸ é“æ— å…³ï¼Œæ¯”å¦‚`formats`è®¾ç½®ä¸ºç©ºï¼Œé‚£ä¹ˆæ— è®ºæ˜¯ï¼š

- é€šè¿‡å·¥å…·æ è®¾ç½®æ ¼å¼
- è¿˜æ˜¯é€šè¿‡å¿«æ·é”®ï¼ˆæ¯”å¦‚`Ctrl+B`ï¼‰è®¾ç½®æ ¼å¼
- äº¦æˆ–æ˜¯ç²˜è´´å¸¦æ ¼å¼çš„æ–‡æœ¬

éƒ½æ˜¯æ— æ³•è®¾ç½®æ ¼å¼çš„ã€‚

å¦‚æœæˆ‘ä»¬æƒ³ä¿ç•™ä¸€éƒ¨åˆ†æ ¼å¼ï¼Œæ¯”å¦‚åªä¿ç•™`ç²—ä½“`å’Œ`åˆ—è¡¨`ä¸¤ç§æ ¼å¼ï¼š

```ts
const quill = new Quill('#editor', {
  theme: 'snow',
  formats: [ 'bold', 'list' ]
});
```

Quill ä¸€å…±æ”¯æŒ`11`ç§è¡Œå†…æ ¼å¼ï¼š
- background
- bold
- color
- font
- code
- italic
- link
- size
- strike
- script
- underline

`7`ç§å—çº§æ ¼å¼ï¼š
- blockquote
- header
- indent
- list
- align
- direction
- code-block

`3`ç§åµŒå…¥æ ¼å¼ï¼š
- formula
- image
- video

ä¸é…ç½®`formats`é€‰é¡¹ï¼Œä¼šé»˜è®¤æ”¯æŒæ‰€æœ‰çš„`21`ç§æ ¼å¼ã€‚

### 3.2 placeholder å ä½æ–‡æœ¬

æˆ‘ä»¬å‘ç°æ˜é‡‘çš„è¯„è®ºæ¡†åœ¨æ²¡æœ‰è¾“å…¥å†…å®¹æ—¶ï¼Œä¼šæœ‰ä¸€ä¸ª`å¹³ç­‰è¡¨è¾¾ï¼Œå‹å–„äº¤æµ`çš„å ä½æ–‡æœ¬ã€‚

![æ˜é‡‘è¯„è®ºæ¡†.png](/assets/quill-basic-9.png)

è¿™å¯ä»¥å¾ˆå®¹æ˜“åœ°é€šè¿‡é…ç½®`placeholder`é€‰é¡¹å®ç°ã€‚

```ts
const quill = new Quill('#editor', {
  formats: [],
  placeholder: 'å¹³ç­‰è¡¨è¾¾ï¼Œå‹å–„äº¤æµ',
});
```

![placeholder.png](/assets/quill-basic-10.png)

### 3.3 readOnly åªè¯»æ¨¡å¼

é€šè¿‡é…ç½®`readOnly`å¯ä»¥å®ç°ï¼š
> åˆå§‹çŠ¶æ€ç¼–è¾‘å™¨æ˜¯é˜…è¯»æ€ï¼Œä¸å¯ä»¥ç¼–è¾‘ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡»`ç¼–è¾‘`æŒ‰é’®è®©ç¼–è¾‘å™¨å˜æˆç¼–è¾‘æ€ã€‚

### 3.4 modules æ¨¡å—é…ç½®

è¿™ä¸ªé…ç½®é¡¹æ”¾åœ¨æœ€åå¹¶ä¸ä»£è¡¨å®ƒä¸é‡è¦ï¼Œæ°æ°ç›¸åï¼Œè¿™æ˜¯ Quill ä¸­`æœ€é‡é‡çº§`ä¹Ÿæ˜¯`æœ€å¸¸ç”¨`çš„é…ç½®ã€‚

Quill ä¸€å…±æœ‰6ä¸ªå†…ç½®æ¨¡å—ï¼š
- Clipboard ç²˜è´´ç‰ˆ
- History æ“ä½œå†å²
- Keyboard é”®ç›˜äº‹ä»¶
- Syntax è¯­æ³•é«˜äº®
- Toolbar å·¥å…·æ 
- Uploader æ–‡ä»¶ä¸Šä¼ 

æ¯ä¸ªæ¨¡å—çš„ç”¨é€”è¯¦è§[Quillå†…ç½®æ¨¡å—](https://juejin.cn/post/6844904073620094990#heading-3)ç« èŠ‚ã€‚

`modules`é€‰é¡¹å¯ä»¥ç”¨æ¥é…ç½®è¿™äº›æ¨¡å—ã€‚

åœ¨åé¢åŸç†ç¯‡çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä¹Ÿä¼šç»™å¤§å®¶è¯¦ç»†ä»‹ç» Quill æ¨¡å—çš„å·¥ä½œåŸç†ï¼Œæ•¬è¯·æœŸå¾…ï¼

#### 3.4.1 é…ç½® toolbar æ¨¡å—

Quill é»˜è®¤åªåœ¨å·¥å…·æ ä¸­æ˜¾ç¤ºä¸€éƒ¨åˆ†æ ¼å¼åŒ–æŒ‰é’®ï¼Œé‡Œé¢æ²¡æœ‰æ’å…¥å›¾ç‰‡çš„æŒ‰é’®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®`toolbar`æ¨¡å—æ¥å¢åŠ ã€‚

```ts
const quill = new Quill('#editor', {
  theme: 'snow',
  modules: {
    toolbar: [
      // é»˜è®¤çš„
      [{ header: [1, 2, 3, false] }],
      ['bold', 'italic', 'underline', 'link'],
      [{ list: 'ordered'}, { list: 'bullet' }],
      ['clean'],
      
       // æ–°å¢çš„
      ['image']
    ]
  }
});
```


![image.png](/assets/quill-basic-11.png)

å¦‚æœæƒ³åšä¸€ä¸ªæ˜é‡‘è¿™æ ·çš„ç¼–è¾‘å™¨ï¼Œä¹Ÿéå¸¸ç®€å•ã€‚

![æ˜é‡‘ç¼–è¾‘å™¨.png](/assets/quill-basic-12.png)

æ˜é‡‘çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ä¸»è¦åŒ…å«ä»¥ä¸‹å·¥å…·æ æŒ‰é’®ï¼š
- æ ‡é¢˜
- åŠ ç²—
- æ–œä½“
- å¼•ç”¨
- è¶…é“¾æ¥
- æ’å…¥å›¾ç‰‡
- æ’å…¥è§†é¢‘
- è¡Œå†…ä»£ç 
- ä»£ç å—
- æ— åºåˆ—è¡¨
- æœ‰åºåˆ—è¡¨
- åˆ é™¤çº¿
- å¯¹é½æ–¹å¼
- å…¬å¼

> æœ‰äº›æ˜é‡‘ç¼–è¾‘å™¨çš„åŠŸèƒ½ï¼ŒQuill æ˜¯æ²¡æœ‰çš„ï¼Œæ‰€ä»¥æ²¡å±•ç¤ºå‡ºæ¥ã€‚

ä½¿ç”¨ Quill å®ç°ï¼Œéœ€è¦è¿™æ ·é…ç½®`toolbar`æ¨¡å—ã€‚

```ts
const quill = new Quill('#editor', {
  theme: 'snow',
  modules: {
    toolbar: [
      { header: [1, 2, 3, 4, 5, 6, false] }, // æ ‡é¢˜
      'bold',             // åŠ ç²—
      'italic',           // æ–œä½“
      'blockquote',       // å¼•ç”¨
      'link',             // è¶…é“¾æ¥
      'image',            // æ’å…¥å›¾ç‰‡
      'video',            // æ’å…¥è§†é¢‘
      'code',             // è¡Œå†…ä»£ç 
      'code-block',       // ä»£ç å—
      { list: 'bullet' }, // æ— åºåˆ—è¡¨
      { list: 'ordered'}, // æœ‰åºåˆ—è¡¨
      'strike',           // åˆ é™¤çº¿
      { 'align': [] },    // å¯¹é½æ–¹å¼
      'formula'           // å…¬å¼
    ]
  }
});
```

ç¨å¾®ä¿®æ”¹ä¸‹æ ·å¼ï¼Œå°±èƒ½åšå‡ºä¸€ä¸ªå’Œæ˜é‡‘å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å·®ä¸å¤šçš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å•¦ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š

![æ˜é‡‘ç¼–è¾‘å™¨ - Quill.png](/assets/quill-basic-13.png)

ä»¥ä¸‹æ˜¯å’Œæ˜é‡‘å®é™…çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨çš„å¯¹æ¯”å›¾ï¼š

![å¯¹æ¯”å›¾.png](/assets/quill-basic-14.png)

å¯¹æ¯”ä»¥ä¸Šæ•ˆæœå¯¹æ¯”å›¾ï¼Œé™¤äº†å·¥å…·æ çš„ icon æœ‰å·®å¼‚ä¹‹å¤–ï¼Œå…¶ä»–å‡ ä¹æ˜¯ä¸€æ ·çš„ã€‚

#### 3.4.2 é…ç½® keyboard æ¨¡å—

é™¤äº†å·¥å…·æ æ¨¡å—ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é…ç½®åˆ«çš„æ¨¡å—ï¼Œæ¯”å¦‚å¿«æ·é”®æ¨¡å—`keyboard`ï¼Œ`keyboard`æ¨¡å—é»˜è®¤æ”¯æŒå¾ˆå¤šå¿«æ·é”®ï¼Œæ¯”å¦‚ï¼š
- åŠ ç²—çš„å¿«æ·é”®æ˜¯`Ctrl+B`ï¼›
- è¶…é“¾æ¥çš„å¿«æ·é”®æ˜¯`Ctrl+K`;
- æ’¤é”€/å›é€€çš„å¿«æ·é”®æ˜¯`Ctrl+Z/Y`ã€‚

ä½†å®ƒä¸æ”¯æŒåˆ é™¤çº¿çš„å¿«æ·é”®ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å®šåˆ¶åˆ é™¤çº¿çš„å¿«æ·é”®ï¼Œå‡è®¾æ˜¯`Ctrl+Shift+S`ï¼Œå¯ä»¥è¿™æ ·é…ç½®ï¼š

```ts
const quill = new Quill('#editor', {
  theme: 'snow',
  modules: {
    toolbar: [
      // é»˜è®¤çš„
      [{ header: [1, 2, 3, false] }],
      ['bold', 'italic', 'underline', 'link'],
      [{ list: 'ordered'}, { list: 'bullet' }],
      ['clean'],
      ['image']
    ],
    
    // æ–°å¢çš„
    keyboard: {
      bindings: {
        strike: {
          key: 'S',
          ctrlKey: true,
          shiftKey: true,
          handler: function(range, context) {
            // è·å–å½“å‰å…‰æ ‡æ‰€åœ¨æ–‡æœ¬çš„æ ¼å¼
            const format = this.quill.getFormat(range);
            // å¢åŠ /å–æ¶ˆåˆ é™¤çº¿
            this.quill.format('strike', !format.strike);
          }
        },
      }
    },
  }
});
```

#### 3.4.3 é…ç½® history æ¨¡å—

Quill å†…ç½®çš„`history`æ¨¡å—ï¼Œæ¯éš”`1s`ä¼šè®°å½•ä¸€æ¬¡æ“ä½œå†å²ï¼Œå¹¶æ”¾å…¥å†å²æ“ä½œæ ˆï¼ˆæœ€å¤§100ï¼‰ä¸­ï¼Œä¾¿äºæ’¤é”€/å›é€€æ“ä½œã€‚

å¦‚æœæˆ‘ä»¬ä¸æƒ³è®°å½•å¾—é‚£ä¹ˆé¢‘ç¹ï¼Œæƒ³`2s`è®°å½•ä¸€æ¬¡ï¼Œå¦å¤–æˆ‘ä»¬æƒ³å¢åŠ æ“ä½œæ ˆçš„å¤§å°ï¼Œæœ€å¤§è®°å½•200æ¬¡æ“ä½œå†å²ï¼Œå¯ä»¥è¿™æ ·é…ç½®ï¼š

```ts
const quill = new Quill('#editor', {
  theme: 'snow',
  modules: {
    toolbar: [
      // é»˜è®¤çš„
      [{ header: [1, 2, 3, false] }],
      ['bold', 'italic', 'underline', 'link'],
      [{ list: 'ordered'}, { list: 'bullet' }],
      ['clean'],
      ['image']
    ],
    keyboard: {
      bindings: {
        strike: {
          key: 'S',
          ctrlKey: true,
          shiftKey: true,
          handler: function(range, context) {
            // è·å–å½“å‰å…‰æ ‡æ‰€åœ¨æ–‡æœ¬çš„æ ¼å¼
            const format = this.quill.getFormat(range);
            // å¢åŠ /å–æ¶ˆåˆ é™¤çº¿
            this.quill.format('strike', !format.strike);
          }
        },
      }
    },
    
    // æ–°å¢çš„
    history: {
      delay: 2000, // 2sè®°å½•ä¸€æ¬¡æ“ä½œå†å²
      maxStack: 200, // æœ€å¤§è®°å½•200æ¬¡æ“ä½œå†å²
    }
  }
});
```

## å°ç»“

æœ¬æ–‡ä¸»è¦ä»‹ç»äº† Quill çš„åŸºæœ¬ç”¨æ³•ï¼Œä»¥åŠå¦‚ä½•é€šè¿‡ options é€‰é¡¹é…ç½® Quillï¼Œoptions åŒ…å«ä¸°å¯Œçš„é€‰é¡¹ï¼Œå¯ä»¥å¿«é€Ÿé…ç½®å‡ºä¸€ä¸ªæ˜é‡‘æ–‡ç« ç¼–è¾‘å™¨ã€‚

Quill æ˜¯ä¸€ä¸ª API é©±åŠ¨çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä¸‹ç¯‡æˆ‘å°†ç»™å¤§å®¶ä»‹ç»æ›´åŠ ä¸°å¯Œçš„ Quill APIï¼Œå¦‚ä½•é€šè¿‡ Quill API æ“çºµç¼–è¾‘å™¨å†…å®¹ã€‚

<EditInfo time="2021å¹´06æœˆ21æ—¥ 07:34" title="é˜…è¯» 5091 Â·  ç‚¹èµ 29 Â·  è¯„è®º 8 Â·  æ”¶è— 45" />

