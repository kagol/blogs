import{_ as a,B as n,o as l,c as p,G as e,Q as o}from"./chunks/framework.1fee3549.js";const B=JSON.parse('{"title":"å‰ç«¯ Vuerï¼Œè¯·æ”¶å¥½è¿™ä»½ã€ŠVueç»„ä»¶å•å…ƒæµ‹è¯•ã€‹å®å…¸ï¼Œç»™è‡ªå·±å¤šä¸€äº›å®‰å…¨æ„Ÿ","description":"","frontmatter":{},"headers":[],"relativePath":"tech/2023/unit-testing-guide-for-vue-components.md","filePath":"tech/2023/unit-testing-guide-for-vue-components.md"}'),t={name:"tech/2023/unit-testing-guide-for-vue-components.md"},c=o(`<h1 id="å‰ç«¯-vuer-è¯·æ”¶å¥½è¿™ä»½ã€Švueç»„ä»¶å•å…ƒæµ‹è¯•ã€‹å®å…¸-ç»™è‡ªå·±å¤šä¸€äº›å®‰å…¨æ„Ÿ" tabindex="-1">å‰ç«¯ Vuerï¼Œè¯·æ”¶å¥½è¿™ä»½ã€ŠVueç»„ä»¶å•å…ƒæµ‹è¯•ã€‹å®å…¸ï¼Œç»™è‡ªå·±å¤šä¸€äº›å®‰å…¨æ„Ÿ <a class="header-anchor" href="#å‰ç«¯-vuer-è¯·æ”¶å¥½è¿™ä»½ã€Švueç»„ä»¶å•å…ƒæµ‹è¯•ã€‹å®å…¸-ç»™è‡ªå·±å¤šä¸€äº›å®‰å…¨æ„Ÿ" aria-label="Permalink to &quot;å‰ç«¯ Vuerï¼Œè¯·æ”¶å¥½è¿™ä»½ã€ŠVueç»„ä»¶å•å…ƒæµ‹è¯•ã€‹å®å…¸ï¼Œç»™è‡ªå·±å¤šä¸€äº›å®‰å…¨æ„Ÿ&quot;">â€‹</a></h1><p>ä½œä¸ºä¸€åå‰ç«¯ï¼Œåœ¨åšä¸šåŠ¡å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œä½ æ˜¯å¦æ›¾ç»ï¼š</p><ul><li>å› ä¸ºæ‹…å¿ƒä¸Šçº¿ä¹‹åå‡ºbugï¼Œè€Œåå¤æ‰‹å·¥éªŒè¯è‡ªå·±è´Ÿè´£çš„æ¨¡å—</li><li>ä¸æ•¢ä¿®æ”¹ç°æœ‰çš„â€œå±å±±â€ï¼ˆåˆ«äººå†™çš„æˆ–è€…æ˜¯è‡ªå·±1å¹´å‰å†™çš„ï¼‰ä»£ç ï¼Œä»è€Œä¸æ–­åœ°ç¼–å†™if/else</li><li>å‘ç°ä¸šåŠ¡ä¸­æœ‰å¾ˆå¤šé‡å¤çš„ä»£ç ï¼Œæ¯æ¬¡ä¸€æ”¹å¥½å¤šåœ°æ–¹éƒ½è¦æ”¹ï¼Œä½†åˆä¸æ•¢é‡æ„ï¼Œæ‹…å¿ƒé‡æ„ä¹‹åå‡ºbug</li><li>æˆ˜æˆ˜å…¢å…¢åœ°ä¿®å¤ä¸€ä¸ªé™ˆå¹´bugï¼Œå°±æ€•å¼•èµ·Nä¸ªæ–°bug</li></ul><p>å¦‚æœä½ ä¸­äº†ä»¥ä¸Šä»»ä½•ä¸€æ¡ï¼Œè¯´æ˜ä½ ç°åœ¨ç¼ºä¹å®‰å…¨æ„Ÿï¼Œä½ æ‹…å¿ƒã€ä½ å®³æ€•ã€ä½ ä¸æ•¢ã€ä½ æˆ˜æˆ˜å…¢å…¢ã€ä½ å¦‚å±¥è–„å†°ã€‚</p><p>æ¯å¤©å†™ä»£ç éƒ½å¤„åœ¨æ‹…æƒŠå—æ€•å½“ä¸­ï¼Œç¨‹åºå‘˜çš„å°Šä¸¥ä½•åœ¨ï¼</p><p>ç¨‹åºå‘˜çš„å®‰å…¨æ„Ÿè¦è‡ªå·±ç»™è‡ªå·±ï¼Œæ˜¯æ—¶å€™æ”¹å˜ç°çŠ¶äº†ï¼</p><p>æˆ‘ä»¬æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥ç»™è‡ªå·±å®‰å…¨æ„Ÿï¼Œæ¯”å¦‚ï¼š</p><ul><li>é…ç½®ä»£ç æ£€æµ‹å·¥å…· ESLint</li><li>å®‰è£…æ‹¼å†™æ£€æŸ¥æ’ä»¶ Code Spell Checker</li><li>ä»£ç è¯„å®¡ Code Review</li><li>ç»“å¯¹ç¼–ç¨‹ Pair programming</li><li>ç¼–å†™å•å…ƒæµ‹è¯• Unit Test</li></ul><p>æœ¬æ–‡ä¸»è¦ç»™å¤§å®¶ä»‹ç»å¦‚ä½•åœ¨ Vue é¡¹ç›®ä¸­ç¼–å†™å•å…ƒæµ‹è¯•ã€‚</p><h2 id="_1-æ­ç¯å¢ƒ" tabindex="-1">1 æ­ç¯å¢ƒ <a class="header-anchor" href="#_1-æ­ç¯å¢ƒ" aria-label="Permalink to &quot;1 æ­ç¯å¢ƒ&quot;">â€‹</a></h2><p>æˆ‘ä»¬çš„å•å…ƒæµ‹è¯•ç¯å¢ƒåŸºäº <code>vitest</code> + <code>@vue/test-utils</code>ã€‚</p><p>å‰æï¼šä½ éœ€è¦æœ‰ä¸€ä¸ª Vue é¡¹ç›®ï¼Œæ²¡æœ‰çš„è¯å¯ä»¥å‚è€ƒ <a href="https://cn.vitejs.dev/guide/#scaffolding-your-first-vite-project" target="_blank" rel="noreferrer">Vite</a> å®˜ç½‘è¿›è¡Œåˆ›å»ºã€‚</p><p>ç¬¬ä¸€æ­¥ï¼Œåœ¨ä½ çš„ Vue é¡¹ç›®ä¸­å®‰è£…å¿…è¦çš„ä¾èµ–åŒ…ã€‚</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">i</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-D</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">vitest</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">@vue/test-utils</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">happy-dom</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">@vitest/coverage-v8</span></span></code></pre></div><p>åœ¨ <code>vite.config.ts</code> æ–‡ä»¶ä¸­å¢åŠ ä»¥ä¸‹é…ç½®ã€‚</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">defineConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vitest/config</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> vue </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@vitejs/plugin-vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">defineConfig</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span><span style="color:#82AAFF;">vue</span><span style="color:#BABED8;">()]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// æ–°å¢</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">test</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">happy-dom</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span></code></pre></div><p>åœ¨ <code>package.json</code> æ–‡ä»¶ä¸­å¢åŠ ç›¸åº”çš„è„šæœ¬å‘½ä»¤</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">&quot;scripts&quot;: {</span></span>
<span class="line"><span style="color:#babed8;">    &quot;dev&quot;: &quot;vite&quot;,</span></span>
<span class="line"><span style="color:#babed8;">    &quot;build&quot;: &quot;vue-tsc &amp;&amp; vite build&quot;,</span></span>
<span class="line"><span style="color:#babed8;">    &quot;preview&quot;: &quot;vite preview&quot;,</span></span>
<span class="line"><span style="color:#babed8;">    </span></span>
<span class="line"><span style="color:#babed8;">    // æ–°å¢</span></span>
<span class="line"><span style="color:#babed8;">    &quot;test&quot;: &quot;vitest&quot;</span></span>
<span class="line"><span style="color:#babed8;">  },</span></span></code></pre></div><p>æˆ‘ä»¬å°è¯•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">npm test</span></span></code></pre></div><p>ä¼šå‘ç°æ§åˆ¶å°ä¼šæ‰“å°ä»¥ä¸‹æ—¥å¿—ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">$ npm test</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">&gt; vue3-vite@0.0.0 test</span></span>
<span class="line"><span style="color:#babed8;">&gt; vitest</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;"> DEV  v0.33.0 /vue3-vite-demo</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">include: **/*.{test,spec}.?(c|m)[jt]s?(x)</span></span>
<span class="line"><span style="color:#babed8;">exclude:  **/node_modules/**, **/dist/**, **/cypress/**, **/.{idea,git,cache,output,temp}/**, **/{karma,rollup,webpack,vite,vitest,jest,ava,babel,nyc,cypress,tsup,build}.config.*</span></span>
<span class="line"><span style="color:#babed8;">watch exclude:  **/node_modules/**, **/dist/**</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">No test files found, exiting with code 1</span></span></code></pre></div><p>æ„æ€æ˜¯ï¼šæ²¡æœ‰æ‰¾åˆ°å•å…ƒæµ‹è¯•æ–‡ä»¶ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜èƒ½è·å–ä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ include è¡¨æ˜äº†å•å…ƒæµ‹è¯•æ–‡ä»¶çš„å‘½ä»¤æ ¼å¼ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">**/*.{test,spec}.?(c|m)[jt]s?(x)</span></span></code></pre></div><p>æˆ‘ä»¬åœ¨ <code>src/components</code> ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª <code>HelloWorld.spec.ts</code> æ–‡ä»¶ã€‚</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">mount</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@vue/test-utils</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">describe</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">it</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">expect</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vitest</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> HelloWorld </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./HelloWorld.vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">describe</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æµ‹è¯• HelloWorld ç»„ä»¶</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">it</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æµ‹è¯•åŸºæœ¬åŠŸèƒ½</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">async</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">wrapper</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">mount</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">HelloWorld</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">wrapper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exists</span><span style="color:#F07178;">())</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBeTruthy</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span></code></pre></div><p>å†æ¬¡æ‰§è¡Œ <code>npm test</code> å‘½ä»¤</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">$ npm test</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;"> âœ“ src/components/HelloWorld.spec.ts (1)</span></span>
<span class="line"><span style="color:#babed8;">   âœ“ æµ‹è¯• HelloWorld ç»„ä»¶ (1)</span></span>
<span class="line"><span style="color:#babed8;">     âœ“ æµ‹è¯•åŸºæœ¬åŠŸèƒ½</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;"> Test Files  1 passed (1)</span></span>
<span class="line"><span style="color:#babed8;">      Tests  1 passed (1)</span></span>
<span class="line"><span style="color:#babed8;">   Start at  23:34:49</span></span>
<span class="line"><span style="color:#babed8;">   Duration  126ms</span></span></code></pre></div><p>ä¼šæç¤ºï¼šæœ‰ä¸€ä¸ªå•å…ƒæµ‹è¯•ç”¨ä¾‹é€šè¿‡ã€‚</p><p>è¿™æ ·æˆ‘ä»¬çš„ Vue é¡¹ç›®å•å…ƒæµ‹è¯•ç¯å¢ƒå°±æ­å»ºæˆåŠŸï¼Œå¹¶ä¸”å®Œæˆäº†ç¬¬ä¸€ä¸ª Vue å•å…ƒæµ‹è¯•ç”¨ä¾‹ğŸ‰ğŸ‰</p><h2 id="_2-æµ‹ä»€ä¹ˆ" tabindex="-1">2 æµ‹ä»€ä¹ˆ <a class="header-anchor" href="#_2-æµ‹ä»€ä¹ˆ" aria-label="Permalink to &quot;2 æµ‹ä»€ä¹ˆ&quot;">â€‹</a></h2><p>æœ‰äº†å•å…ƒæµ‹è¯•ç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­ä»»æ„å‘æŒ¥ï¼Œç»™è‡ªå·±æ»¡æ»¡çš„å®‰å…¨æ„Ÿã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•ç»™ Vue ç»„ä»¶ç¼–å†™å•å…ƒæµ‹è¯•å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬ä»¥ OpenTiny Vue çš„ <a href="https://opentiny.design/tiny-vue/zh-CN/os-theme/components/date-picker" target="_blank" rel="noreferrer">DatePicker</a> ç»„ä»¶ä¸ºä¾‹ã€‚</p><p>æ•ˆæœå›¾ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e9bb12522aab4a99a967926d6c77129f~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>æˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹ï¼š</p><h3 id="step-1-æµ‹è¯•é»˜è®¤è¡Œä¸º" tabindex="-1">Step 1ï¼šæµ‹è¯•é»˜è®¤è¡Œä¸º <a class="header-anchor" href="#step-1-æµ‹è¯•é»˜è®¤è¡Œä¸º" aria-label="Permalink to &quot;Step 1ï¼šæµ‹è¯•é»˜è®¤è¡Œä¸º&quot;">â€‹</a></h3><ul><li>æµ‹è¯•åŸºæœ¬åŠŸèƒ½ï¼šç‚¹å‡»æ—¥æœŸè¾“å…¥æ¡†ï¼Œåº”è¯¥å¼¹å‡ºæ—¥æœŸé€‰æ‹©é¢æ¿ï¼Œç‚¹å‡»æ—¥æœŸé€‰æ‹©é¢æ¿ä¸­çš„æ—¥æœŸï¼Œé¢æ¿æ¶ˆå¤±ï¼Œå¹¶åœ¨è¾“å…¥æ¡†ä¸­æ˜¾ç¤ºé€‰ä¸­çš„æ—¥æœŸ</li><li>æµ‹è¯•æ¸…é™¤æ—¥æœŸï¼šé¼ æ ‡ç§»åˆ°å·²ç»é€‰æ‹©æ—¥æœŸçš„è¾“å…¥æ¡†ä¸­ï¼Œåº”è¯¥å‡ºç°æ¸…é™¤æ—¥æœŸçš„å›¾æ ‡æŒ‰é’®ï¼Œç‚¹å‡»æ¸…é™¤æ—¥æœŸå›¾æ ‡ï¼Œè¾“å…¥æ¡†ä¸­çš„æ—¥æœŸè¢«æ¸…é™¤</li><li>...</li></ul><h3 id="step-2-æµ‹è¯•æ¯ä¸€ä¸ªå•ç‹¬çš„-api" tabindex="-1">Step 2ï¼šæµ‹è¯•æ¯ä¸€ä¸ªå•ç‹¬çš„ API <a class="header-anchor" href="#step-2-æµ‹è¯•æ¯ä¸€ä¸ªå•ç‹¬çš„-api" aria-label="Permalink to &quot;Step 2ï¼šæµ‹è¯•æ¯ä¸€ä¸ªå•ç‹¬çš„ API&quot;">â€‹</a></h3><ul><li>æµ‹è¯• disabled å±æ€§ï¼šè®¾ç½® disabled å±æ€§ä¹‹åï¼Œæ—¥æœŸè¾“å…¥æ¡†åº”è¯¥å˜æˆç¦ç”¨çŠ¶æ€ï¼Œç‚¹å‡»è¾“å…¥æ¡†ï¼Œä¸ä¼šå¼¹å‡ºæ—¥æœŸé€‰æ‹©é¢æ¿</li><li>æµ‹è¯• clearable å±æ€§ï¼šè®¾ç½® clearable ä¸º false ä¹‹åï¼Œé¼ æ ‡ç§»åˆ°è¾“å…¥æ¡†ä¸Šï¼Œä¸æ˜¾ç¤ºæ¸…é™¤æ—¥æœŸçš„å›¾æ ‡</li><li>...</li></ul><h3 id="steps-3-æµ‹è¯•-api-çš„è¾¹ç•Œå€¼" tabindex="-1">Steps 3ï¼šæµ‹è¯• API çš„è¾¹ç•Œå€¼ <a class="header-anchor" href="#steps-3-æµ‹è¯•-api-çš„è¾¹ç•Œå€¼" aria-label="Permalink to &quot;Steps 3ï¼šæµ‹è¯• API çš„è¾¹ç•Œå€¼&quot;">â€‹</a></h3><ul><li>æµ‹è¯•æ—¥æœŸè¶Šç•Œï¼šè®¾ç½® v-model çš„å€¼ä¸º <code>&quot;2023-07-32&quot;</code>ï¼Œåº”è¯¥ä¸æ˜¾ç¤ºæ—¥æœŸ</li><li>æµ‹è¯•é”™è¯¯æ ¼å¼çš„æ—¥æœŸï¼šè®¾ç½® v-model çš„å€¼ä¸ºæ•°å€¼ <code>20230713</code>ï¼Œåº”è¯¥ä¸æ˜¾ç¤ºæ—¥æœŸ</li><li>...</li></ul><h3 id="steps-4-æµ‹è¯•-api-ä¹‹é—´çš„ç»„åˆ" tabindex="-1">Steps 4ï¼šæµ‹è¯• API ä¹‹é—´çš„ç»„åˆ <a class="header-anchor" href="#steps-4-æµ‹è¯•-api-ä¹‹é—´çš„ç»„åˆ" aria-label="Permalink to &quot;Steps 4ï¼šæµ‹è¯• API ä¹‹é—´çš„ç»„åˆ&quot;">â€‹</a></h3><ul><li>æµ‹è¯• type/format ä¸‰ä¸ªå±æ€§ä¹‹é—´çš„ç»„åˆï¼šè®¾ç½® <code>type=&quot;week&quot;</code> å’Œ <code>format=&quot;yyyy å¹´ç¬¬ WW å‘¨&quot;</code>ï¼Œæ—¥æœŸé€‰æ‹©é¢æ¿åº”è¯¥å˜æˆé€‰æ‹©å‘¨ï¼Œé€‰æ‹©5æœˆ7æ—¥åˆ°13æ—¥è¿™å‘¨ä¹‹åï¼Œè¾“å…¥æ¡†ä¸­æ˜¾ç¤ºçš„å†…å®¹åº”è¯¥æ˜¯ <code>2023 å¹´ç¬¬19å‘¨</code></li><li>...</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">&lt;tiny-date-picker</span></span>
<span class="line"><span style="color:#babed8;">  v-model=&quot;value&quot;</span></span>
<span class="line"><span style="color:#babed8;">  type=&quot;week&quot;</span></span>
<span class="line"><span style="color:#babed8;">  format=&quot;yyyy å¹´ç¬¬ WW å‘¨&quot;</span></span>
<span class="line"><span style="color:#babed8;">&gt;&lt;/tiny-date-picker&gt;</span></span></code></pre></div><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2b2e17c19df74c88b663834387b8a5c4~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><h2 id="_3-æ€ä¹ˆæµ‹" tabindex="-1">3 æ€ä¹ˆæµ‹ <a class="header-anchor" href="#_3-æ€ä¹ˆæµ‹" aria-label="Permalink to &quot;3 æ€ä¹ˆæµ‹&quot;">â€‹</a></h2><h3 id="å•æµ‹ä¸‰å¤§ä»¶-describe-test-expect" tabindex="-1">å•æµ‹ä¸‰å¤§ä»¶ï¼šdescribe / test / expect <a class="header-anchor" href="#å•æµ‹ä¸‰å¤§ä»¶-describe-test-expect" aria-label="Permalink to &quot;å•æµ‹ä¸‰å¤§ä»¶ï¼šdescribe / test / expect&quot;">â€‹</a></h3><p>ä¸€ä¸ªå•å…ƒæµ‹è¯•åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>describe æµ‹è¯•å¥—ï¼Œé‡Œé¢å¯ä»¥åŒ…å«å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œ</li><li>it(test) æµ‹è¯•ç”¨ä¾‹</li><li>expect æ–­è¨€è¯­å¥</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">describe</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">it</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">expect</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vitest</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">describe</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æµ‹è¯• HelloWorld ç»„ä»¶</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">it</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æµ‹è¯•åŸºæœ¬åŠŸèƒ½</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">async</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">wrapper</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">mount</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">HelloWorld</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">wrapper</span><span style="color:#89DDFF;">.</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">wrapper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exists</span><span style="color:#F07178;">())</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBeTruthy</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">wrapper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.card</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exists</span><span style="color:#F07178;">())</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBeTruthy</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">it</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æµ‹è¯• msg å±æ€§</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span></code></pre></div><h3 id="æ¨¡æ‹Ÿ-vue-ç»„ä»¶æŒ‚è½½-mount-å’Œ-wrapper" tabindex="-1">æ¨¡æ‹Ÿ Vue ç»„ä»¶æŒ‚è½½ï¼šmount å’Œ wrapper <a class="header-anchor" href="#æ¨¡æ‹Ÿ-vue-ç»„ä»¶æŒ‚è½½-mount-å’Œ-wrapper" aria-label="Permalink to &quot;æ¨¡æ‹Ÿ Vue ç»„ä»¶æŒ‚è½½ï¼šmount å’Œ wrapper&quot;">â€‹</a></h3><p>æ¯ä¸ªå•å…ƒæµ‹è¯•é‡Œé¢æµ‹è¯• Vue ç»„ä»¶çš„è¡¨ç°æ˜¯å¦æ­£å¸¸ï¼Œéœ€è¦å€ŸåŠ© <code>@vue/test-utils</code> çš„ mount æ–¹æ³•ï¼Œæ¨¡æ‹Ÿç»„ä»¶çš„æŒ‚è½½ã€‚</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">import { mount } from &#39;@vue/test-utils&#39;</span></span>
<span class="line"><span style="color:#babed8;">import HelloWorld from &#39;./HelloWorld.vue&#39;</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">const wrapper = mount(HelloWorld, {</span></span>
<span class="line"><span style="color:#babed8;">  props: {</span></span>
<span class="line"><span style="color:#babed8;">    msg: &#39;OpenTiny&#39;</span></span>
<span class="line"><span style="color:#babed8;">  }</span></span>
<span class="line"><span style="color:#babed8;">})</span></span></code></pre></div><p>ç”¨ mount å‡½æ•°åŒ…è£¹ç»„ä»¶ï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ªæŒ‚è½½å¥½çš„ç»„ä»¶å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«äº†ä¸€ç³»åˆ—å®ç”¨çš„æ–¹æ³•å¯ä»¥ç”¨äºç»„ä»¶çš„æµ‹è¯•ã€‚</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0481e075139643cca71f711a212f2f28~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><p>æ¯”è¾ƒå¸¸ç”¨çš„æœ‰ï¼š</p><ul><li>findï¼šå¯»æ‰¾ç»„ä»¶å†…éƒ¨çš„ DOM èŠ‚ç‚¹</li><li>findComponentï¼šå¯»æ‰¾å­ç»„ä»¶</li><li>existsï¼šåˆ¤æ–­ç»„ä»¶æˆ–å…ƒç´ æ˜¯å¦å­˜åœ¨</li><li>attributesï¼šè·å– DOM èŠ‚ç‚¹çš„å±æ€§</li><li>classesï¼šè·å– DOM èŠ‚ç‚¹çš„ class</li><li>...</li></ul><p>æ›´å¤š wrapper æ–¹æ³•è¯·å‚è€ƒï¼š<a href="https://test-utils.vuejs.org/api/#wrapper-methods" target="_blank" rel="noreferrer">Vue Test Utils å®˜ç½‘æ–‡æ¡£</a></p><h3 id="å†™å•æµ‹å°±æ˜¯å†™æ–­è¨€" tabindex="-1">å†™å•æµ‹å°±æ˜¯å†™æ–­è¨€ <a class="header-anchor" href="#å†™å•æµ‹å°±æ˜¯å†™æ–­è¨€" aria-label="Permalink to &quot;å†™å•æµ‹å°±æ˜¯å†™æ–­è¨€&quot;">â€‹</a></h3><p>æœ‰äº† wrapperï¼Œå°±å¯ä»¥å¯¹ Vue ç»„ä»¶åšæ–­è¨€ã€‚</p><p>æ¯”å¦‚ä»¥ä¸‹æ–­è¨€ç”¨äºåˆ¤æ–­ DOM èŠ‚ç‚¹ <code>.card</code> æ˜¯å¦å­˜åœ¨ï¼Œ<code>toBeTruthy()</code>ç”¨äºæ–­è¨€ä¸€ä¸ªå€¼æ˜¯å¦ä¸º trueã€‚</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">expect(wrapper.find(&#39;.card&#39;).exists()).toBeTruthy()</span></span></code></pre></div><p>å¸¸è§çš„æ–­è¨€ç±»å‹æœ‰ï¼š</p><ul><li>toBeï¼šç”¨äºæ–­è¨€åŸå§‹ç±»å‹æ˜¯å¦ç›¸ç­‰ï¼Œæ¯”å¦‚ï¼š<code>expect(1+1).toBe(2)</code></li><li>toBeTruthyï¼šç”¨äºæ–­è¨€ä¸€ä¸ªå€¼æ˜¯å¦ä¸º true</li><li>notï¼šç”¨äºå¦å®šæ–­è¨€ï¼Œæ¯”å¦‚ï¼š<code>expect(1+1).toBe(3)</code></li><li>toBeGreaterThanï¼šæ–­è¨€å®é™…å€¼æ˜¯å¦å¤§äºæ¥æ”¶åˆ°çš„å€¼</li><li>toEqualï¼šæ–­è¨€å®é™…å€¼æ˜¯å¦ç­‰äºæ¥æ”¶åˆ°çš„å€¼æˆ–å…·æœ‰ç›¸åŒçš„ç»“æ„ï¼ˆå¦‚æœæ˜¯å¯¹è±¡ï¼Œåˆ™é€’å½’æ¯”è¾ƒå®ƒä»¬ï¼‰ï¼Œæ³¨æ„å’Œ <code>toBe</code> çš„åŒºåˆ«</li><li>toContainï¼šæ–­è¨€å®é™…å€¼æ˜¯å¦åœ¨æ•°ç»„ä¸­</li><li>toMatchï¼šæ–­è¨€å­—ç¬¦ä¸²æ˜¯å¦ä¸æ­£åˆ™è¡¨è¾¾å¼æˆ–å­—ç¬¦ä¸²åŒ¹é…</li><li>toHaveBeenCalledï¼šç”¨äºæµ‹è¯•å‡½æ•°æ˜¯å¦å·²è¢«è°ƒç”¨</li><li>...</li></ul><p>æ›´å¤šæ–­è¨€ç±»å‹è¯·å‚è€ƒï¼š<a href="https://cn.vitest.dev/api/expect.html" target="_blank" rel="noreferrer">Vitest å®˜ç½‘</a></p><h3 id="ä¸€ä¸ª-datepicker-ç»„ä»¶çš„å°ä¾‹å­" tabindex="-1">ä¸€ä¸ª DatePicker ç»„ä»¶çš„å°ä¾‹å­ <a class="header-anchor" href="#ä¸€ä¸ª-datepicker-ç»„ä»¶çš„å°ä¾‹å­" aria-label="Permalink to &quot;ä¸€ä¸ª DatePicker ç»„ä»¶çš„å°ä¾‹å­&quot;">â€‹</a></h3><p>æµ‹è¯• DatePicker ç»„ä»¶çš„åŸºæœ¬åŠŸèƒ½ï¼šç‚¹å‡»æ—¥æœŸè¾“å…¥æ¡†ï¼Œåº”è¯¥å¼¹å‡ºæ—¥æœŸé€‰æ‹©é¢æ¿ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">it</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æµ‹è¯• DatePicker ç»„ä»¶çš„åŸºæœ¬åŠŸèƒ½</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">async</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">()</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">wrapper</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">mount</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">DatePicker</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">v-model</span><span style="color:#89DDFF;">={</span><span style="color:#BABED8;">value</span><span style="color:#89DDFF;">}&gt;&lt;/</span><span style="color:#FFCB6B;">DatePicker</span><span style="color:#89DDFF;">&gt;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">wrapper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exists</span><span style="color:#F07178;">())</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBe</span><span style="color:#F07178;">(</span><span style="color:#FF9CAC;">true</span><span style="color:#F07178;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// æ²¡æœ‰ç‚¹å‡»æ—¥æœŸè¾“å…¥æ¡†ä¹‹å‰ï¼Œæ²¡æœ‰æ—¥æœŸé€‰æ‹©é¢æ¿</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelector</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.tiny-date-picker</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">not</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBeTruthy</span><span style="color:#F07178;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">wrapper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">input</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">trigger</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">focus</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ç‚¹å‡»æ—¥æœŸè¾“å…¥æ¡†ä¹‹åï¼Œå‡ºç°æ—¥æœŸé€‰æ‹©é¢æ¿</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">expect</span><span style="color:#F07178;">(</span><span style="color:#BABED8;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">querySelector</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.tiny-date-picker</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">))</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toBeTruthy</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">)</span></span></code></pre></div><p>å‚è€ƒï¼š</p><ul><li><a href="https://cn.vitest.dev/guide/" target="_blank" rel="noreferrer">Vitest å®˜ç½‘</a></li><li><a href="https://test-utils.vuejs.org/guide/" target="_blank" rel="noreferrer">Vue Test Utils å®˜ç½‘</a></li></ul>`,73);function r(i,y,F,D,d,u){const s=n("EditInfo");return l(),p("div",null,[c,e(s,{time:"2023-07-14 07:44",title:"10295å±•ç° Â· 366é˜…è¯» Â· 6ç‚¹èµ Â· 0è¯„è®º Â· 14æ”¶è—"})])}const A=a(t,[["render",r]]);export{B as __pageData,A as default};
