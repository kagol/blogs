import{_ as a,B as n,o as e,c as l,G as p,Q as o}from"./chunks/framework.1fee3549.js";const m=JSON.parse('{"title":"å‰ç«¯ Vuerï¼Œè¯·ç»™ä½ çš„é¡¹ç›®åŠ ä¸Š ESLint","description":"","frontmatter":{},"headers":[],"relativePath":"tech/2022/vue-eslint.md","filePath":"tech/2022/vue-eslint.md"}'),t={name:"tech/2022/vue-eslint.md"},c=o(`<h1 id="å‰ç«¯-vuer-è¯·ç»™ä½ çš„é¡¹ç›®åŠ ä¸Š-eslint" tabindex="-1">å‰ç«¯ Vuerï¼Œè¯·ç»™ä½ çš„é¡¹ç›®åŠ ä¸Š ESLint <a class="header-anchor" href="#å‰ç«¯-vuer-è¯·ç»™ä½ çš„é¡¹ç›®åŠ ä¸Š-eslint" aria-label="Permalink to &quot;å‰ç«¯ Vuerï¼Œè¯·ç»™ä½ çš„é¡¹ç›®åŠ ä¸Š ESLint&quot;">â€‹</a></h1><p><img src="https://user-images.githubusercontent.com/9566362/201374882-510b7641-0c33-4966-8765-d8e23cfc632c.png" alt="image"></p><h2 id="_1-eslint-æ˜¯ä»€ä¹ˆ" tabindex="-1">1 ESLint æ˜¯ä»€ä¹ˆ <a class="header-anchor" href="#_1-eslint-æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;1 ESLint æ˜¯ä»€ä¹ˆ&quot;">â€‹</a></h2><p>ESLint æ˜¯ä¸€ä¸ªæ’ä»¶å¼çš„ JavaScript / JSX ä»£ç æ£€æŸ¥å·¥å…·ï¼Œç”¨äºæ£€æµ‹å’Œä¿®å¤ JavaScript ä»£ç ä¸­çš„é—®é¢˜ï¼Œç›®æ ‡æ˜¯è®©ä»£ç æ›´ä¸€è‡´å¹¶é¿å…é”™è¯¯ã€‚</p><h2 id="_2-åœ¨-vue-é¡¹ç›®ä¸­å¼•å…¥-eslint" tabindex="-1">2 åœ¨ Vue é¡¹ç›®ä¸­å¼•å…¥ ESLint <a class="header-anchor" href="#_2-åœ¨-vue-é¡¹ç›®ä¸­å¼•å…¥-eslint" aria-label="Permalink to &quot;2 åœ¨ Vue é¡¹ç›®ä¸­å¼•å…¥ ESLint&quot;">â€‹</a></h2><p>ä½¿ç”¨ Vue CLI æ­å»ºçš„ Vue2 é¡¹ç›®å·²ç»è‡ªå¸¦ ESLintï¼Œå°±ä¸èµ˜è¿°ï¼Œæˆ‘ä»¬çœ‹ä¸‹ Vite æ­å»ºçš„ Vue3 é¡¹ç›®ä¸­æ€ä¹ˆå¼•å…¥ ESLintã€‚</p><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ­å»ºä¸€ä¸ª Vue3 é¡¹ç›®ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">npm create vite@latest vue3-project</span></span></code></pre></div><p>åˆ›å»ºä¹‹åï¼Œå¯åŠ¨èµ·æ¥ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">npm i</span></span>
<span class="line"><span style="color:#babed8;">npm run dev</span></span></code></pre></div><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5be6c6cf5a1542328345b64e7254b863~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p><h3 id="_2-1-å¼•å…¥-eslint" tabindex="-1">2.1 å¼•å…¥ ESLint <a class="header-anchor" href="#_2-1-å¼•å…¥-eslint" aria-label="Permalink to &quot;2.1 å¼•å…¥ ESLint&quot;">â€‹</a></h3><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">npm init @eslint/config</span></span></code></pre></div><p>è¿›å…¥äº¤äº’å¼ç•Œé¢ï¼Œå¯é€šè¿‡ä¸Šä¸‹æ–¹å‘é”®é€‰æ‹©ï¼Œé€šè¿‡æŒ‰å›è½¦é”®ç¡®å®šã€‚</p><p>ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼š</p><ul><li>ä½ å¸Œæœ›ç”¨ ESLint æ¥å¹²å˜›ï¼Ÿ</li><li>æˆ‘ä»¬é€‰æ‹©æœ€å…¨é¢çš„é‚£ä¸ªï¼šæ£€æŸ¥è¯­æ³•ï¼Œå‘ç°é—®é¢˜ï¼Œå¹¶å¼ºåˆ¶ç»Ÿä¸€ä»£ç æ ·å¼</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">$ npm init @eslint/config</span></span>
<span class="line"><span style="color:#babed8;">? How would you like to use ESLint? â€¦ </span></span>
<span class="line"><span style="color:#babed8;">  To check syntax only</span></span>
<span class="line"><span style="color:#babed8;">  To check syntax and find problems</span></span>
<span class="line"><span style="color:#babed8;">â¯ To check syntax, find problems, and enforce code style</span></span></code></pre></div><p>ç¬¬äºŒä¸ªé—®é¢˜æ˜¯ï¼š</p><ul><li>ä½ çš„é¡¹ç›®ç”¨çš„æ˜¯ä»€ä¹ˆæ¨¡å—ç³»ç»Ÿï¼Ÿ</li><li>å› ä¸ºæ˜¯è¿è¡Œåœ¨æµè§ˆå™¨ç«¯ï¼Œé€‰æ‹© <code>ESModule</code></li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">? What type of modules does your project use? â€¦ </span></span>
<span class="line"><span style="color:#babed8;">â¯ JavaScript modules (import/export)</span></span>
<span class="line"><span style="color:#babed8;">  CommonJS (require/exports)</span></span>
<span class="line"><span style="color:#babed8;">  None of these</span></span></code></pre></div><p>ç¬¬ä¸‰ä¸ªé—®é¢˜æ˜¯ï¼š</p><ul><li>ä½ ç”¨çš„ä»€ä¹ˆæ¡†æ¶ï¼Ÿï¼ˆå±…ç„¶æ²¡æœ‰ Angularï¼‰</li><li>é€‰æ‹© <code>Vue</code></li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">? Which framework does your project use? â€¦ </span></span>
<span class="line"><span style="color:#babed8;">  React</span></span>
<span class="line"><span style="color:#babed8;">â¯ Vue.js</span></span>
<span class="line"><span style="color:#babed8;">  None of these</span></span></code></pre></div><p>ç¬¬å››ä¸ªé—®é¢˜æ˜¯ï¼š</p><ul><li>ä½ æ˜¯å¦ä½¿ç”¨ TypeScriptï¼Ÿ</li><li>é€‰æ‹© <code>Yes</code></li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">? Does your project use TypeScript? â€º No / Yes</span></span></code></pre></div><p>ç¬¬äº”ä¸ªé—®é¢˜æ˜¯ï¼š</p><ul><li>ä½ çš„ä»£ç è¿è¡Œåœ¨ä»€ä¹ˆç¯å¢ƒï¼Ÿï¼ˆè¿™ä¸ªå¯ä»¥å¤šé€‰ï¼‰</li><li>é€‰æ‹© <code>Browser</code> æµè§ˆå™¨ç¯å¢ƒ</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">? Where does your code run? â€¦  (Press &lt;space&gt; to select, &lt;a&gt; to toggle all, &lt;i&gt; to invert selection)</span></span>
<span class="line"><span style="color:#babed8;">âœ” Browser</span></span>
<span class="line"><span style="color:#babed8;">âœ” Node</span></span></code></pre></div><p>ç¬¬å…­ä¸ªé—®é¢˜æ˜¯ï¼š</p><ul><li>ä½ æƒ³å®šä¹‰æ€æ ·çš„ä»£ç é£æ ¼ï¼Ÿ</li><li>é€‰æ‹©ä½¿ç”¨ä¸€ä¸ªæµè¡Œçš„ä»£ç é£æ ¼</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">? How would you like to define a style for your project? â€¦ </span></span>
<span class="line"><span style="color:#babed8;">â¯ Use a popular style guide</span></span>
<span class="line"><span style="color:#babed8;">  Answer questions about your style</span></span></code></pre></div><p>ç¬¬ä¸ƒä¸ªé—®é¢˜æ˜¯ï¼š</p><ul><li>ä½ æƒ³ä½¿ç”¨å“ªä¸ªæ ·å¼é£æ ¼ï¼Ÿ</li><li><code>Airbnb</code> ç”¨çš„äººæ¯”è¾ƒå¤šï¼Œå°±é€‰è¿™ä¸ªå§</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">? Which style guide do you want to follow? â€¦ </span></span>
<span class="line"><span style="color:#babed8;">â¯ Airbnb: https://github.com/airbnb/javascript</span></span>
<span class="line"><span style="color:#babed8;">  Standard: https://github.com/standard/standard</span></span>
<span class="line"><span style="color:#babed8;">  Google: https://github.com/google/eslint-config-google</span></span>
<span class="line"><span style="color:#babed8;">  XO: https://github.com/xojs/eslint-config-xo</span></span></code></pre></div><p>ç¬¬å…«ä¸ªé—®é¢˜æ˜¯ï¼š</p><ul><li>é…ç½®æ–‡ä»¶ç”¨ä»€ä¹ˆæ ¼å¼ï¼Ÿ</li><li>å°±é€‰ JavaScript å§ï¼ˆç”Ÿæˆ <code>eslintrc.js</code> æ–‡ä»¶ï¼‰</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">? What format do you want your config file to be in? â€¦ </span></span>
<span class="line"><span style="color:#babed8;">â¯ JavaScript</span></span>
<span class="line"><span style="color:#babed8;">  YAML</span></span>
<span class="line"><span style="color:#babed8;">  JSON</span></span></code></pre></div><p>å®Œæˆï¼æ˜¯ä¸æ˜¯è¶…çº§ç®€å•ï¼</p><p>çœ‹ä¸‹æˆ‘ä»¬éƒ½é€‰äº†å“ªäº›é…ç½®ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">âœ” How would you like to use ESLint? Â· style</span></span>
<span class="line"><span style="color:#babed8;">âœ” What type of modules does your project use? Â· esm</span></span>
<span class="line"><span style="color:#babed8;">âœ” Which framework does your project use? Â· vue</span></span>
<span class="line"><span style="color:#babed8;">âœ” Does your project use TypeScript? Â· Yes</span></span>
<span class="line"><span style="color:#babed8;">âœ” Where does your code run? Â· browser</span></span>
<span class="line"><span style="color:#babed8;">âœ” How would you like to define a style for your project? Â· guide</span></span>
<span class="line"><span style="color:#babed8;">âœ” Which style guide do you want to follow? Â· airbnb</span></span>
<span class="line"><span style="color:#babed8;">âœ” What format do you want your config file to be in? Â· JavaScript</span></span></code></pre></div><p>ä¸»è¦ç»™æˆ‘ä»¬å®‰è£…äº†ä»¥ä¸‹ä¾èµ–ï¼š</p><ul><li><code>eslint-config-airbnb-base@15.0.0</code></li><li><code>eslint-plugin-import@2.26.0</code></li><li><code>eslint-plugin-vue@9.2.0</code></li><li><code>eslint@8.20.0</code></li><li><code>@typescript-eslint/parser@5.30.6</code></li><li><code>@typescript-eslint/eslint-plugin@5.30.6</code></li></ul><p>å¹¶ç”Ÿæˆäº†ä¸€ä¸ª <code>eslintrc.cjs</code> é…ç½®æ–‡ä»¶ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">env</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">browser</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">es2021</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">extends</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">plugin:vue/vue3-essential</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">airbnb-base</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">parserOptions</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">ecmaVersion</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">latest</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">parser</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@typescript-eslint/parser</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">sourceType</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> [</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@typescript-eslint</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  ]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// è‡ªå®šä¹‰ rules è§„åˆ™</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">rules</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><h3 id="_2-2-eslint-é…ç½®" tabindex="-1">2.2 ESLint é…ç½® <a class="header-anchor" href="#_2-2-eslint-é…ç½®" aria-label="Permalink to &quot;2.2 ESLint é…ç½®&quot;">â€‹</a></h3><ul><li>parser è§£æå™¨</li><li>extends é…ç½®æ‰©å±•</li><li>plugins æ’ä»¶</li><li>rules è‡ªå®šä¹‰è§„åˆ™ <a href="https://eslint.org/docs/latest/rules/" target="_blank" rel="noreferrer">https://eslint.org/docs/latest/rules/</a></li><li>eslint-disable-next-line ç¦ç”¨ESLint</li></ul><h3 id="_2-3-æ‰§è¡Œ-eslint-ä»£ç æ£€æŸ¥" tabindex="-1">2.3 æ‰§è¡Œ ESLint ä»£ç æ£€æŸ¥ <a class="header-anchor" href="#_2-3-æ‰§è¡Œ-eslint-ä»£ç æ£€æŸ¥" aria-label="Permalink to &quot;2.3 æ‰§è¡Œ ESLint ä»£ç æ£€æŸ¥&quot;">â€‹</a></h3><p>åœ¨ package.json æ–‡ä»¶çš„ scripts ä¸­é…ç½® lint è„šæœ¬å‘½ä»¤ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">&quot;scripts&quot;: {</span></span>
<span class="line"><span style="color:#babed8;">  &quot;dev&quot;: &quot;vite&quot;,</span></span>
<span class="line"><span style="color:#babed8;">  &quot;build&quot;: &quot;vue-tsc --noEmit &amp;&amp; vite build&quot;,</span></span>
<span class="line"><span style="color:#babed8;">  &quot;preview&quot;: &quot;vite preview&quot;,</span></span>
<span class="line"><span style="color:#babed8;">  </span></span>
<span class="line"><span style="color:#babed8;">  // é…ç½® lint è„šæœ¬å‘½ä»¤</span></span>
<span class="line"><span style="color:#babed8;">  &quot;lint&quot;: &quot;eslint --ext .vue,.ts src/&quot;</span></span>
<span class="line"><span style="color:#babed8;">},</span></span></code></pre></div><p>æ‰§è¡Œ lint è„šæœ¬å‘½ä»¤ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">npm run lint</span></span></code></pre></div><p>å‡ºç°äº†ä¸€å †æŠ¥é”™ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">/vue3-project/src/App.vue</span></span>
<span class="line"><span style="color:#babed8;">  4:53  error  Missing semicolon  semi</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">/vue3-project/src/components/HelloWorld.vue</span></span>
<span class="line"><span style="color:#babed8;">  2:26  error  Missing semicolon  semi</span></span>
<span class="line"><span style="color:#babed8;">  4:31  error  Missing semicolon  semi</span></span>
<span class="line"><span style="color:#babed8;">  6:21  error  Missing semicolon  semi</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">/vue3-project/src/main.ts</span></span>
<span class="line"><span style="color:#babed8;">  1:32  error  Missing semicolon  semi</span></span>
<span class="line"><span style="color:#babed8;">  2:21  error  Missing semicolon  semi</span></span>
<span class="line"><span style="color:#babed8;">  3:28  error  Missing semicolon  semi</span></span>
<span class="line"><span style="color:#babed8;">  5:29  error  Missing semicolon  semi</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">/vue3-project/src/vite-env.d.ts</span></span>
<span class="line"><span style="color:#babed8;">  4:3   error  Expected 1 empty line after import statement not followed by another import  import/newline-after-import</span></span>
<span class="line"><span style="color:#babed8;">  4:45  error  Missing semicolon                                                            semi</span></span>
<span class="line"><span style="color:#babed8;">  5:48  error  Missing semicolon                                                            semi</span></span>
<span class="line"><span style="color:#babed8;">  6:27  error  Missing semicolon                                                            semi</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">âœ– 12 problems (12 errors, 0 warnings)</span></span>
<span class="line"><span style="color:#babed8;">  12 errors and 0 warnings potentially fixable with the \`--fix\` option.</span></span></code></pre></div><p>å¤§éƒ¨åˆ†éƒ½æ˜¯è¯´å¥å°¾æ²¡æœ‰åˆ†å·ï¼Œå› ä¸ºæˆ‘ä»¬é€‰æ‹©çš„æ˜¯ Airbnb ä»£ç è§„èŒƒï¼Œæ‰€ä»¥ä¼šæœ‰è¿™ä¸ªæŠ¥é”™æç¤ºï¼Œä¸åŒçš„ä»£ç è§„èŒƒï¼Œå†…ç½®çš„æ£€æŸ¥è§„åˆ™ä¸ä¸€å®šå®Œå…¨ç›¸åŒã€‚</p><h3 id="_2-4-è‡ªåŠ¨ä¿®å¤-eslint-é—®é¢˜" tabindex="-1">2.4 è‡ªåŠ¨ä¿®å¤ ESLint é—®é¢˜ <a class="header-anchor" href="#_2-4-è‡ªåŠ¨ä¿®å¤-eslint-é—®é¢˜" aria-label="Permalink to &quot;2.4 è‡ªåŠ¨ä¿®å¤ ESLint é—®é¢˜&quot;">â€‹</a></h3><p>åœ¨ scripts ä¸­å¢åŠ è‡ªåŠ¨ä¿®å¤ ESLint é—®é¢˜çš„è„šæœ¬å‘½ä»¤ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">&quot;scripts&quot;: {</span></span>
<span class="line"><span style="color:#babed8;">  &quot;dev&quot;: &quot;vite&quot;,</span></span>
<span class="line"><span style="color:#babed8;">  &quot;build&quot;: &quot;vue-tsc --noEmit &amp;&amp; vite build&quot;,</span></span>
<span class="line"><span style="color:#babed8;">  &quot;preview&quot;: &quot;vite preview&quot;,</span></span>
<span class="line"><span style="color:#babed8;">  &quot;lint&quot;: &quot;eslint --ext .vue,.ts src/&quot;,</span></span>
<span class="line"><span style="color:#babed8;">  </span></span>
<span class="line"><span style="color:#babed8;">  // è‡ªåŠ¨ä¿®å¤ ESLint é—®é¢˜è„šæœ¬å‘½ä»¤</span></span>
<span class="line"><span style="color:#babed8;">  &quot;lint:fix&quot;: &quot;eslint --ext .vue,.ts src/ --fix&quot;</span></span>
<span class="line"><span style="color:#babed8;">},</span></span></code></pre></div><p>æ‰§è¡Œï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">npm run lint:fix</span></span></code></pre></div><p>æ‰§è¡Œè‡ªåŠ¨ä¿®å¤çš„å‘½ä»¤ä¹‹åï¼Œæ‰€æœ‰åˆ†å·éƒ½åŠ ä¸Šäº†ï¼Œæœªä½¿ç”¨çš„å˜é‡ä¹Ÿè‡ªåŠ¨ç§»é™¤äº†ã€‚</p><p>å†æ¬¡æ‰§è¡Œï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">npm run lint</span></span></code></pre></div><p>æ²¡æœ‰å†æŠ¥é”™ã€‚</p><h2 id="_3-é…ç½®-husky-å’Œ-pr-é—¨ç¦" tabindex="-1">3 é…ç½® husky å’Œ PR é—¨ç¦ <a class="header-anchor" href="#_3-é…ç½®-husky-å’Œ-pr-é—¨ç¦" aria-label="Permalink to &quot;3 é…ç½® husky å’Œ PR é—¨ç¦&quot;">â€‹</a></h2><h3 id="_3-1-é…ç½®-husky-é—¨ç¦" tabindex="-1">3.1 é…ç½® husky é—¨ç¦ <a class="header-anchor" href="#_3-1-é…ç½®-husky-é—¨ç¦" aria-label="Permalink to &quot;3.1 é…ç½® husky é—¨ç¦&quot;">â€‹</a></h3><p>ä¸ºäº†ç¡®ä¿æ¯æ¬¡æäº¤(git commit)ä¹‹å‰ä»£ç éƒ½é€šè¿‡ ESLint æ£€æŸ¥ï¼Œæˆ‘ä»¬å¢åŠ ä¸€ä¸ª pre-commit é—¨ç¦ã€‚</p><ul><li>ç¬¬ä¸€æ­¥ï¼šå®‰è£… husky å’Œ lint-staged</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">npm i lint-staged husky -D</span></span></code></pre></div><ul><li>ç¬¬äºŒæ­¥ï¼šåœ¨ package.json çš„ scripts ä¸­å¢åŠ  prepare è„šæœ¬å‘½ä»¤</li></ul><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">dev</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vite</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">build</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vue-tsc --noEmit &amp;&amp; vite build</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">preview</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">vite preview</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">lint</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">eslint --ext .vue,.ts src/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">lint:fix</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">eslint --ext .vue,.ts src/ --fix</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#676E95;font-style:italic;">// åœ¨ npm install ä¹‹åè‡ªåŠ¨æ‰§è¡Œï¼Œç”Ÿæˆ\`.husky\`ç›®å½•ã€‚</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">prepare</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">husky install</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">,</span></span></code></pre></div><ul><li>ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œ prepare è„šæœ¬</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">npm run prepare</span></span></code></pre></div><p>è¯¥å‘½ä»¤æ‰§è¡Œå®Œä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•è‡ªåŠ¨ç”Ÿæˆ<code>.husky</code>ç›®å½•ã€‚</p><ul><li>ç¬¬å››æ­¥ï¼šå¢åŠ  pre-commit é’©å­</li></ul><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¼šåœ¨<code>.husky</code>ç›®å½•è‡ªåŠ¨ç”Ÿæˆ<code>pre-commit</code>æ–‡ä»¶é’©å­ã€‚</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">npx husky add .husky/pre-commit &quot;npx lint-staged&quot;</span></span></code></pre></div><ul><li>ç¬¬äº”æ­¥ï¼šå¢åŠ  lint-staged é…ç½®</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">&quot;lint-staged&quot;: {</span></span>
<span class="line"><span style="color:#babed8;">  &quot;src/**/*.{vue,ts}&quot;: &quot;eslint --fix&quot;</span></span>
<span class="line"><span style="color:#babed8;">},</span></span></code></pre></div><p>é€šè¿‡ä»¥ä¸Šäº”ä¸ªæ­¥éª¤ï¼Œä»¥åæ¯æ¬¡ä½¿ç”¨<code>git commit</code>å‘½ä»¤æäº¤æäº¤ä»£ç ï¼Œéƒ½ä¼šï¼š</p><ul><li>è¢« pre-commit é’©å­æ‹¦æˆª</li><li>æ‰§è¡Œ npx lint-staged å‘½ä»¤</li><li>è¿›è€Œæ‰§è¡Œ eslint --fix å‘½ä»¤ï¼Œå¯¹æœ¬æ¬¡æäº¤ä¿®æ”¹çš„ä»£ç æ¶‰åŠçš„æ–‡ä»¶è¿›è¡Œä»£ç æ£€æŸ¥ï¼Œå¹¶è‡ªåŠ¨ä¿®å¤èƒ½ä¿®å¤çš„é”™è¯¯ï¼Œä¸èƒ½ä¿®å¤çš„é”™è¯¯ä¼šæç¤ºå‡ºæ¥ï¼Œåªæœ‰æ‰€æœ‰ ESLint é”™è¯¯éƒ½ä¿®å¤äº†æ‰èƒ½æäº¤æˆåŠŸ</li></ul><h3 id="_3-2-é…ç½®-pr-é—¨ç¦" tabindex="-1">3.2 é…ç½® PR é—¨ç¦ <a class="header-anchor" href="#_3-2-é…ç½®-pr-é—¨ç¦" aria-label="Permalink to &quot;3.2 é…ç½® PR é—¨ç¦&quot;">â€‹</a></h3><p>å¦‚æœä½ åœ¨åšè‡ªå·±çš„å¼€æºé¡¹ç›®ï¼Œå¹¶ä¸”éå¸¸å¹¸è¿ï¼Œæœ‰ä¸€ç¾¤å¿—åŒé“åˆçš„å°ä¼™ä¼´æ„¿æ„ä¸€èµ·å‚ä¸è´¡çŒ®ï¼Œè¿™æ—¶ä¸ºäº†ç»Ÿä¸€å¤§å®¶çš„ä»£ç é£æ ¼ï¼Œè®©è´¡çŒ®è€…ä»¬ä¸“æ³¨äºç‰¹æ€§å¼€å‘ï¼Œä¸ç”¨æ‹…å¿ƒä»£ç æ ¼å¼è§„èŒƒé—®é¢˜ï¼Œå¹¶é€šè¿‡ ESLint å·¥å…·æç¤ºè´¡çŒ®è€…ï¼Œå“ªäº›ä»£ç å¯èƒ½å¸¦æ¥æ½œåœ¨çš„é£é™©ï¼Œä½ å°±æœ‰å¿…è¦ç»™æäº¤çš„ PR åŠ ä¸Š ESLint é—¨ç¦ã€‚</p><p>æˆ‘ä»¬å·²ç»å¢åŠ äº†æœ¬åœ°çš„ ESLint å‘½ä»¤ï¼š</p><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#BABED8;">: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">lint</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">eslint --ext .vue,.ts src/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#BABED8;">,</span></span></code></pre></div><p>æˆ‘ä»¬éœ€è¦åœ¨æœ¬ç›®å½•åˆ›å»ºä¸€ä¸ª<code>.github/workflows/pull-request.yml</code>æ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><div class="language-yml"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Pull Request</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9CAC;">on</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">push</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">branches</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dev</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">main</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">pull_request</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">branches</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dev</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">main</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">jobs</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">runs-on</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">ubuntu-latest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">strategy</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#F07178;">matrix</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">node-version</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#C3E88D;">16.x</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ESLint</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">steps</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Checkout</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">actions/checkout@v2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Install pnpm</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">npm/action-setup@v2</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">6</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Use Node.js \${{ matrix.node-version }}</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">actions/setup-node@v2</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#F07178;">node-version</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">\${{ matrix.node-version }}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Install deps</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">run</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">npm i</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">ESLint</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">run</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">npm run lint</span></span></code></pre></div><p>è¿™æ ·åªè¦ PR æ˜¯å¾€ dev æˆ– main åˆ†æ”¯åˆå…¥çš„ï¼Œéƒ½ä¼šè·‘ä¸€éè¿™ä¸ª Github Actions å·¥ä½œæµä»»åŠ¡ï¼ŒESLint æ£€æŸ¥ä¸é€šè¿‡çš„è¯ï¼ŒPR çš„ checks é‡Œé¢ä¼šæç¤ºï¼Œæ‹¦æˆªè¯¥ PR çš„åˆå…¥ã€‚</p><p>PR çš„æäº¤è€…çœ‹åˆ°æç¤ºï¼Œä¹Ÿå¯ä»¥ç‚¹åˆ°ä»»åŠ¡é‡Œé¢å»çœ‹æ˜¯å“ªé‡ŒæŠ¥é”™ï¼Œä¿®æ”¹æ‰è¿™äº› ESLint é—®é¢˜ï¼ŒPR å°±ä¼šå˜æˆç»¿è‰²ï¼Œé¡¹ç›®çš„ç®¡ç†å‘˜å°±å¯ä»¥é¡ºåˆ©åˆå…¥ PR åˆ°ç›®æ ‡åˆ†æ”¯å•¦ğŸ‰</p><h2 id="_4-å¸¸è§çš„-eslint-é—®é¢˜åŠä¿®å¤æ¡ˆä¾‹" tabindex="-1">4 å¸¸è§çš„ ESLint é—®é¢˜åŠä¿®å¤æ¡ˆä¾‹ <a class="header-anchor" href="#_4-å¸¸è§çš„-eslint-é—®é¢˜åŠä¿®å¤æ¡ˆä¾‹" aria-label="Permalink to &quot;4 å¸¸è§çš„ ESLint é—®é¢˜åŠä¿®å¤æ¡ˆä¾‹&quot;">â€‹</a></h2><p>æ¥ä¸‹æ¥è·Ÿå¤§å®¶åˆ†äº« Vue DevUI å¼€æº Vue3 ç»„ä»¶åº“ ESLint é—®é¢˜ä¿®å¤è¿‡ç¨‹ä¸­é‡åˆ°çš„å…¸å‹é—®é¢˜ã€‚</p><h3 id="_4-1-æ¡ˆä¾‹1-warning-unexpected-any-specify-a-different-type-typescript-eslint-no-explicit-any" tabindex="-1">4.1 æ¡ˆä¾‹1ï¼šwarning Unexpected any. Specify a different type @typescript-eslint/no-explicit-any <a class="header-anchor" href="#_4-1-æ¡ˆä¾‹1-warning-unexpected-any-specify-a-different-type-typescript-eslint-no-explicit-any" aria-label="Permalink to &quot;4.1 æ¡ˆä¾‹1ï¼šwarning Unexpected any. Specify a different type @typescript-eslint/no-explicit-any&quot;">â€‹</a></h3><p>è¯¥é—®é¢˜å‡ºç°é¢‘ç‡æ¯”è¾ƒé«˜ï¼ŒåŸå› æ˜¯æœ‰äº›ç±»å‹å†™äº†<code>any</code>ï¼Œéœ€è¦æ˜ç¡®çš„ç±»å‹ã€‚</p><p>æ¯”å¦‚Paginationç»„ä»¶çš„å•å…ƒæµ‹è¯•æ–‡ä»¶<code>pagination.spec.ts</code>ä¸­ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">const wrapper = mount({</span></span>
<span class="line"><span style="color:#babed8;">    components: {</span></span>
<span class="line"><span style="color:#babed8;">        DPagination</span></span>
<span class="line"><span style="color:#babed8;">    },</span></span>
<span class="line"><span style="color:#babed8;">    template: \`&lt;d-pagination ... /&gt;\`</span></span>
<span class="line"><span style="color:#babed8;">}, globalOption);</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">const btns = wrapper.findAll(&#39;a.devui-pagination-link&#39;);</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">expect(btns.map((ele: any) =&gt; ele.text()).join()).toEqual(&#39;&lt;,1,...,4,5,6,...,16,&gt;&#39;);</span></span></code></pre></div><p>å…¶ä¸­çš„<code>ele: any</code>å°±å±äºè¿™ç±»é—®é¢˜ã€‚</p><p>è§£å†³åŠæ³•æ˜¯ç»™<code>ele</code>åŠ ä¸Šæ˜ç¡®çš„ç±»å‹ï¼Œçœ‹é€»è¾‘æ˜¯<code>&lt;button&gt;</code>å…ƒç´ ï¼Œç”±äºæ˜¯<code>@vue/test-utils</code>åº“çš„åŒ…è£¹å…ƒç´ ï¼Œå› æ­¤éœ€è¦åŒ…ä¸€å±‚<code>DOMWrapper</code>ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">import { DOMWrapper } from &#39;@vue/test-utils&#39;;</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">expect(btns.map((ele:  DOMWrapper&lt;Element&gt;) =&gt; ele.text()).join()).toEqual(&#39;&lt;,1,...,4,5,6,...,16,&gt;&#39;);</span></span></code></pre></div><h3 id="_4-2-æ¡ˆä¾‹2-xxx-was-used-before-it-was-defined-no-use-before-define" tabindex="-1">4.2 æ¡ˆä¾‹2ï¼š&#39;xxx&#39; was used before it was defined no-use-before-define <a class="header-anchor" href="#_4-2-æ¡ˆä¾‹2-xxx-was-used-before-it-was-defined-no-use-before-define" aria-label="Permalink to &quot;4.2 æ¡ˆä¾‹2ï¼š&#39;xxx&#39; was used before it was defined no-use-before-define&quot;">â€‹</a></h3><p>è¿™ä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„é—®é¢˜ï¼Œåœ¨å£°æ˜ä¹‹å‰ä½¿ç”¨å˜é‡æˆ–æ–¹æ³•ï¼Œè§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦è°ƒæ•´ä¸‹ä»£ç çš„é¡ºåºå³å¯ï¼Œå°†å˜é‡æˆ–æ–¹æ³•çš„å£°æ˜æ”¾åœ¨è°ƒç”¨çš„è¯­å¥ä¹‹å‰ã€‚</p><p>æ¯”å¦‚Paginationç»„ä»¶çš„<code>pagination.tsx</code>ä¸­ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">// æç®€æ¨¡å¼ä¸‹ï¼Œå¯é€‰çš„ä¸‹æ‹‰é€‰æ‹©é¡µç </span></span>
<span class="line"><span style="color:#babed8;">    const litePageOptions = computed(() =&gt;  liteSelectOptions(totalPages.value));</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">    // å½“å‰é¡µç </span></span>
<span class="line"><span style="color:#babed8;">    const cursor = computed({</span></span>
<span class="line"><span style="color:#babed8;">      get() {</span></span>
<span class="line"><span style="color:#babed8;">        // æ˜¯å¦éœ€è¦ä¿®æ­£é”™è¯¯çš„pageIndex</span></span>
<span class="line"><span style="color:#babed8;">        if (!props.showTruePageIndex &amp;&amp; props.pageIndex &gt; totalPages.value) {</span></span>
<span class="line"><span style="color:#babed8;">          emit(&#39;update:pageIndex&#39;, totalPages.value || 1);</span></span>
<span class="line"><span style="color:#babed8;">          return totalPages.value || 1;</span></span>
<span class="line"><span style="color:#babed8;">        }</span></span>
<span class="line"><span style="color:#babed8;">        return props.pageIndex || 1;</span></span>
<span class="line"><span style="color:#babed8;">      },</span></span>
<span class="line"><span style="color:#babed8;">      set(val: number) {</span></span>
<span class="line"><span style="color:#babed8;">        emit(&#39;update:pageIndex&#39;, val);</span></span>
<span class="line"><span style="color:#babed8;">      }</span></span>
<span class="line"><span style="color:#babed8;">    });</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">    // æ€»é¡µæ•°</span></span>
<span class="line"><span style="color:#babed8;">    const totalPages = computed(() =&gt; Math.ceil(props.total / props.pageSize));</span></span></code></pre></div><p>å…¶ä¸­çš„<code>totalPages</code>çš„å£°æ˜åœ¨æ¯”è¾ƒé åçš„ä½ç½®ï¼Œä½†æ˜¯å´åœ¨å£°æ˜ä¹‹å‰åœ¨<code>litePageOptions</code>å’Œ<code>cursor</code>å˜é‡ä¸­éƒ½ä½¿ç”¨äº†<code>totalPages</code>ï¼Œæ‰€ä»¥æç¤º ESLint é—®é¢˜ã€‚</p><p>è§£å†³çš„æ–¹æ³•å°±æ˜¯å°†<code>totalPages</code>çš„å£°æ˜æ”¾åœ¨<code>litePageOptions</code>å’Œ<code>cursor</code>ä¹‹å‰ã€‚</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">// æ€»é¡µæ•°</span></span>
<span class="line"><span style="color:#babed8;">    const totalPages = computed(() =&gt; Math.ceil(props.total / props.pageSize));</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">    // æç®€æ¨¡å¼ä¸‹ï¼Œå¯é€‰çš„ä¸‹æ‹‰é€‰æ‹©é¡µç </span></span>
<span class="line"><span style="color:#babed8;">    const litePageOptions = computed(() =&gt;  liteSelectOptions(totalPages.value));</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">    // å½“å‰é¡µç </span></span>
<span class="line"><span style="color:#babed8;">    const cursor = computed({ ... });</span></span></code></pre></div><h3 id="_4-3-æ¡ˆä¾‹3-warning-missing-return-type-on-function-typescript-eslint-explicit-module-boundary-types" tabindex="-1">4.3 æ¡ˆä¾‹3ï¼šwarning Missing return type on function @typescript-eslint/explicit-module-boundary-types <a class="header-anchor" href="#_4-3-æ¡ˆä¾‹3-warning-missing-return-type-on-function-typescript-eslint-explicit-module-boundary-types" aria-label="Permalink to &quot;4.3 æ¡ˆä¾‹3ï¼šwarning Missing return type on function @typescript-eslint/explicit-module-boundary-types&quot;">â€‹</a></h3><p>è¯¥é—®é¢˜æ˜¯å› ä¸ºå‡½æ•°ç¼ºå°‘è¿”å›ç±»å‹ï¼Œæ¯”å¦‚Fullscreenç»„ä»¶<code>utils.ts</code>æ–‡ä»¶çš„<code>launchImmersiveFullScreen</code>æ–¹æ³•ä¸­ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">export const launchImmersiveFullScreen = async (docElement: any) =&gt; {</span></span>
<span class="line"><span style="color:#babed8;">  let fullscreenLaunch = null;</span></span>
<span class="line"><span style="color:#babed8;">  if (docElement.requestFullscreen) {</span></span>
<span class="line"><span style="color:#babed8;">    fullscreenLaunch = docElement.requestFullscreen();</span></span>
<span class="line"><span style="color:#babed8;">  } else if (docElement.mozRequestFullScreen) {</span></span>
<span class="line"><span style="color:#babed8;">    fullscreenLaunch = docElement.mozRequestFullScreen();</span></span>
<span class="line"><span style="color:#babed8;">  } else if (docElement.webkitRequestFullScreen) {</span></span>
<span class="line"><span style="color:#babed8;">    fullscreenLaunch = Promise.resolve(docElement.webkitRequestFullScreen());</span></span>
<span class="line"><span style="color:#babed8;">  } else if (docElement.msRequestFullscreen) {</span></span>
<span class="line"><span style="color:#babed8;">    fullscreenLaunch = Promise.resolve(docElement.msRequestFullscreen());</span></span>
<span class="line"><span style="color:#babed8;">  }</span></span>
<span class="line"><span style="color:#babed8;">  return await fullscreenLaunch.then(() =&gt; !!document.fullscreenElement);</span></span>
<span class="line"><span style="color:#babed8;">};</span></span></code></pre></div><p>å…ˆçœ‹ä¸‹<code>launchImmersiveFullScreen</code>æ–¹æ³•çš„å‚æ•°é—®é¢˜ï¼Œ<code>docElement</code>ç”¨äº†<code>any</code>ï¼Œä¹Ÿç¼ºå¤±äº†è¿”å›ç±»å‹ï¼Œ<code>docElement</code>å…¶å®å°±æ˜¯<code>document</code>å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>HTMLElement</code>ç±»å‹ï¼Œä½†æ˜¯<code>launchImmersiveFullScreen</code>è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥å¯åŠ¨æ²‰æµ¸å¼å…¨å±çš„ï¼Œä¸ºäº†å®ç°æµè§ˆå™¨å…¼å®¹ï¼Œæ¯”å¦‚ä½¿ç”¨äº†<code>docElement.mozRequestFullScreen</code>å…¼å®¹ç«ç‹ï¼Œè€Œè¿™äº›æ–¹æ³•åœ¨HTMLElementä¸­æ˜¯æ²¡æœ‰çš„ï¼Œä¼šæŠ¥TSç±»å‹é”™è¯¯ï¼Œæ‰€ä»¥éœ€è¦åšä¸€äº›æ”¹é€ ã€‚</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">interface CompatibleHTMLElement extends HTMLElement {</span></span>
<span class="line"><span style="color:#babed8;">  mozRequestFullScreen?: () =&gt; void;</span></span>
<span class="line"><span style="color:#babed8;">  webkitRequestFullScreen?: () =&gt; void;</span></span>
<span class="line"><span style="color:#babed8;">  msRequestFullscreen?: () =&gt; void;</span></span>
<span class="line"><span style="color:#babed8;">}</span></span></code></pre></div><p>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ª<code>CompatibleHTMLElement</code>çš„ç±»å‹ï¼Œç»§æ‰¿äº†<code>HTMLElement</code>ï¼Œå¹¶å¢åŠ äº†ä¸€äº›è‡ªå®šä¹‰çš„æ–¹æ³•ã€‚</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">export const launchImmersiveFullScreen = async (docElement: CompatibleHTMLElement) =&gt; {</span></span>
<span class="line"><span style="color:#babed8;">  ...</span></span>
<span class="line"><span style="color:#babed8;">}</span></span></code></pre></div><p>å†æ¥çœ‹ä¸‹<code>launchImmersiveFullScreen</code>æ–¹æ³•çš„è¿”å›ç±»å‹é—®é¢˜ã€‚</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">return await fullscreenLaunch.then(() =&gt; !!document.fullscreenElement);</span></span></code></pre></div><p>è¯¥æ–¹æ³•è¿”å›äº†ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ï¼Œå®ƒçš„ç±»å‹æ˜¯ä¸€ä¸ªæ³›å‹ï¼Œæˆ‘ä»¬éœ€è¦ä¼ å…¥å…·ä½“çš„ç±»å‹ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">export const launchImmersiveFullScreen = async (docElement: CompatibleHTMLElement): Promise&lt;boolean&gt; =&gt; {</span></span>
<span class="line"><span style="color:#babed8;">  ...</span></span>
<span class="line"><span style="color:#babed8;">  return await fullscreenLaunch.then(() =&gt; !!document.fullscreenElement);</span></span>
<span class="line"><span style="color:#babed8;">};</span></span></code></pre></div><h3 id="_4-4-æ¡ˆä¾‹4-xxx-is-already-declared-in-the-upper-scope-typescript-eslint-no-shadow" tabindex="-1">4.4 æ¡ˆä¾‹4ï¼š&#39;xxx&#39; is already declared in the upper scope @typescript-eslint/no-shadow <a class="header-anchor" href="#_4-4-æ¡ˆä¾‹4-xxx-is-already-declared-in-the-upper-scope-typescript-eslint-no-shadow" aria-label="Permalink to &quot;4.4 æ¡ˆä¾‹4ï¼š&#39;xxx&#39; is already declared in the upper scope @typescript-eslint/no-shadow&quot;">â€‹</a></h3><p>è¿™ä¸ªé—®é¢˜æ˜¯ç”±äºåµŒå¥—çš„ä½œç”¨åŸŸä¸­å®šä¹‰äº†ç›¸åŒçš„å˜é‡åï¼Œæ¯”å¦‚Treeç»„ä»¶çš„<code>use-checked.ts</code>æ–‡ä»¶ä¸­ï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">export default function useChecked(...) {</span></span>
<span class="line"><span style="color:#babed8;">  const onNodeClick = (item: TreeItem) =&gt; {</span></span>
<span class="line"><span style="color:#babed8;">    // è¿™é‡Œå®šä¹‰äº† id å˜é‡</span></span>
<span class="line"><span style="color:#babed8;">    const { id } = item;</span></span>
<span class="line"><span style="color:#babed8;">    ...</span></span>
<span class="line"><span style="color:#babed8;">    filter é‡Œé¢åˆå®šä¹‰äº†ä¸€ä¸ª id å‚æ•°</span></span>
<span class="line"><span style="color:#babed8;">    const currentSelectedItem = flatData.filter(({ id }) =&gt; currentSelected[id] &amp;&amp; currentSelected[id] !== &#39;none&#39;);</span></span>
<span class="line"><span style="color:#babed8;">    ...</span></span>
<span class="line"><span style="color:#babed8;">  }</span></span>
<span class="line"><span style="color:#babed8;">}</span></span></code></pre></div><p>ä¿®æ”¹æ–¹å¼å°±æ˜¯å°†å…¶ä¸­ä¸€ä¸ª id çš„åå­—æ”¹äº†ï¼Œæ¯”å¦‚æŠŠé‡Œé¢çš„ id æ”¹æˆ itemIdï¼š</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">const currentSelectedItem = flatData.filter(({ id: itemId }) =&gt; currentSelected[itemId] &amp;&amp; currentSelected[itemId] !== &#39;none&#39;);</span></span></code></pre></div><p>æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ åœ¨é¡¹ç›®ä¸­é‡åˆ°çš„ <code>ESLint</code> é—®é¢˜ğŸ‘ğŸ‘</p>`,124);function i(r,d,y,u,b,D){const s=n("EditInfo");return e(),l("div",null,[c,p(s,{time:"2022å¹´07æœˆ20æ—¥ 07:58",title:"é˜…è¯» 3974 Â·  ç‚¹èµ 80 Â·  è¯„è®º 31 Â·  æ”¶è— 99"})])}const g=a(t,[["render",i]]);export{m as __pageData,g as default};
